---
title: "PWFSLSmoke Data Exploration"
author: "Rex Thompson - Mazama Science"
date: '`r Sys.Date()`'
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{PWFSLSmoke Data Exploration}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, echo=FALSE}
knitr::opts_chunk$set(fig.width=7, fig.height=5)
library(MazamaSpatialUtils); setSpatialDataDir('~/Data/Spatial'); loadSpatialData('NaturalEarthAdm1') 
```

This vignette offers examples of how the PWFSLSmoke package can be used to enable data exploration while supporting a variety of common tasks and questions.

# Setup

First we need to load the PWFSLSmoke package and set up logging. You can pass
arguments to the `logger.setup()` function to send logging information to log files. In the following
example we use `logger.setLevel()` to send any ERROR output to the console.

```{r eval=FALSE}
library(PWFSLSmoke)
logger.setup()
logger.setLevel(ERROR)
```

```{r include=FALSE}
library(PWFSLSmoke)
logger.setup()
logger.setLevel(ERROR)
```

## Data Acquisition

First we'll gather monitoring data. This is done using one of the "createMonitorObject" functions like the one shown below. See the "E-Sampler_Data_Handling" Vignette for a detailed look at what goes on in the function shown below, including download, parsing, QA/QC and clustering of the data.

```{r}
plain <- airsis_createMonitorObject(20160901, 20161015, provider='USFS', unitID=1033 )
```

This ws_monitor object can be used in a variety of ways. For example, see code and results below.

```{r}
monitorPlot_rollingMean(plain)
```


The steps above (to be expanded) can be used to create a ws_monitor object that conforms to internal data format standards which enables the use of tools developed specifically to handle such objecs. See _____ for more informtion on the ws_monitor data structure.

We can also create a raw dataframe. This process is similar.

```{r raw}
df <- PWFSLSmoke::airsis_createRawDataframe(20160901, 20161015, provider='USFS', unitID=1033)
```

Now to clean the data

```{r}
df <- raw_enhance(df,rawSource='AIRSIS')
```

Now you have a nice raw dataset with which to work.



Make a plot

```{r}
rawPlot_windRose(df,ws.int=1)
```



STRUCTURE:
 - Setup
 - ws_monitor object creation
 - ws_monitor plots and other goodies
 - raw_enhance object creation
 - raw_enhance plots and other goodies

## Put it all together
 
 Make a bunch of plots that are all related?
 
## Conclusion

R is powerful. We have developed solid tools. Lots of good stuff we can do now.

The end.
