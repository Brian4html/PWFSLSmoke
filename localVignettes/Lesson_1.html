<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Mazama Science" />

<meta name="date" content="2016-11-04" />

<title>A Crash Course in R</title>






<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">A Crash Course in R</h1>
<h4 class="author"><em>Mazama Science</em></h4>
<h4 class="date"><em>2016-11-04</em></h4>



<p>R is a full blown <em>programming language</em> for statistical analysis and high level graphics. The programming language aspect of R has allowed developers (often with advanced degrees in statistics) to create a tremendous number of <em>packages</em> that make it easy to apply powerful analytical techniques. This lesson introduces you to the programming language side of R with a review of basic syntax, common data types and structures. At the end of this lesson you should be able to identify and manipulate the most common data structures in R.</p>
<p>Typography:</p>
<p>R commands within a paragraph will appear in <code>this font</code>.</p>
<p>Blocks of code like this one identify R commands you should copy or type into the R console.</p>
<pre><code>print('Output will appear in a block like this.')</code></pre>
<hr />
<div id="functions" class="section level1">
<h1>Functions</h1>
<p>The first thing you need to know about R is that it is a <em>functional language</em> which means that there aren’t really statements <em>per se</em>, only functions, almost all of which return some sort of result or <em>object</em>. One such function is <code>getwd()</code> which returns the current working directory as a character string.</p>
<p>There are three ways to use the name of a function</p>
<ol style="list-style-type: decimal">
<li><code>?getwd</code> will display documentation for the function</li>
<li><code>getwd</code> will print out the contents of the function – either R script or compiled code</li>
<li><code>getwd()</code> will invoke the function, returning a result</li>
</ol>
<p>Often, you will want to assign the result of a function to a variable. Typing the name of the variable will print out the contents of that variable:</p>
<pre><code>thisDir &lt;- getwd()
thisDir</code></pre>
<p>You could perform both of these actions in one step as a function’s return value is typically printed to the console by default:</p>
<pre><code>getwd()</code></pre>
<hr />
<p><strong>Task 1</strong>: Investigate the following functions:</p>
<blockquote>
<table>
<thead>
<tr class="header">
<th align="left">system</th>
<th align="left">data creation</th>
<th align="left">math</th>
<th align="left">stats</th>
<th align="left">plotting</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">getwd</td>
<td align="left">c</td>
<td align="left">min</td>
<td align="left">rnorm</td>
<td align="left">plot</td>
</tr>
<tr class="even">
<td align="left">setwd</td>
<td align="left">seq</td>
<td align="left">mean</td>
<td align="left">quantile</td>
<td align="left">hist</td>
</tr>
<tr class="odd">
<td align="left">dir</td>
<td align="left">rep</td>
<td align="left">log</td>
<td align="left">cor</td>
<td align="left">mtext</td>
</tr>
</tbody>
</table>
</blockquote>
<hr />
<p>Examining the documentation for <code>?dir</code> we see the following:</p>
<pre><code>list.files(path = &quot;.&quot;, pattern = NULL, all.files = FALSE,
           full.names = FALSE, recursive = FALSE,
           ignore.case = FALSE, include.dirs = FALSE, no.. = FALSE)

dir(path = &quot;.&quot;, pattern = NULL, all.files = FALSE,
    full.names = FALSE, recursive = FALSE,
    ignore.case = FALSE, include.dirs = FALSE, no.. = FALSE)
...</code></pre>
<hr />
<p>This documentation tells us that there is an equivalent function named <code>list.files()</code> and that these functions take arguments. As seen above, default values are often specified. In this case the default value for the ‘path’ argument is ‘.’ – the current directory.</p>
<p>Arguments to functions may be specified by position or by name or some mix. So you can ask for the absolute path of all files in the current directory with: <code>dir(getwd(),full.names=TRUE)</code>. The call to <code>getwd()</code> returns the absolute path of the current directory and this is used as the first argument. We accept default values for all other arguments except ‘full.names’ where we override the default value by setting it to ‘TRUE’.</p>
<p>R has other <em>special values</em> besides just ‘TRUE’ and ‘FALSE’. Here are the most common ones:</p>
<ul>
<li><code>TRUE</code> and <code>FALSE</code> are logical values</li>
<li><code>NA</code> is used for missing values of any data type</li>
<li><code>NULL</code> represents ‘nothing’</li>
<li><code>Inf</code> is for ‘infinity’ (<em>try typing</em> <code>1/0</code>)</li>
</ul>
</div>
<div id="operators" class="section level1">
<h1>Operators</h1>
<p>R has the basic set of mathematical operators: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>^</code>, <code>%%</code>. (See <code>?base::Arithmetic</code> for more details.) Comparison operators include <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code>, <code>==</code>, <code>!=</code>. (See <code>?base::Comparison</code>)</p>
<p><em>Note: R does not have ‘++’ style increment operators</em>.</p>
<p><em>Note: Although R supports <code>=</code> as the assignment operator, the vast majority of R users prefer <code>&lt;-</code> (left assignment).</em></p>
<p>Example 1:</p>
<pre><code># Randomly sample the normal distribution 100 times and assign the result to 'a'
a &lt;- rnorm(100) # see ?rnorm
# Print out the length of 'a'
length(a)
# Print out the values associated with the default quantiles
quantile(a)</code></pre>
<hr />
<p><strong>Task 2</strong>: Explain the following lines and plots:</p>
<pre><code>b1 &lt;- rnorm(1e6, mean=2.0)
b2 &lt;- rnorm(1e6, mean=-2.0)
hist(c(b1,b2), n=100) # see ?c
subtitle &lt;- paste('Bimodal Std. Dev. =', sd(c(b1,b2)))
mtext(subtitle)

# Why is this next plot unimodal?
hist(b1+b2, n=100)
subtitle &lt;- paste('Unimodal Std. Dev. =', round(sd(b1+b2),3)) # see ?round
mtext(subtitle)</code></pre>
<hr />
</div>
<div id="vectorized-data" class="section level1">
<h1>Vectorized Data</h1>
<p>The first thing you need to know about any programming language is the set of fundamental data types. Here are the most basic types you will encounter in R:</p>
<ul>
<li>logical</li>
<li>integer</li>
<li>double</li>
<li>complex</li>
<li>character</li>
<li>raw</li>
</ul>
<p>You can find out what data <em>type</em> a variable contains with the <code>typeof()</code> function. However, we recommend that you instead get in the habit of using the <code>class()</code> function to find out about the <em>class</em> of an object. The <code>class()</code> function is more general in that it will return information about data variables, functions and any of the <em>S3</em> or <em>S4</em> objects from R’s increasingly huge bestiary.</p>
<p>For instance, <code>typeof(b1)</code> returns ‘double’ while <code>class(b1)</code> returns the slightly more generic ‘numeric’. But <code>typeof(hist)</code> returns ‘closure’ whereas <code>class(hist)</code> returns ‘function’ which is much more appropriate for non-computer science people.</p>
<p>Data variables in R are <em>vectorized</em> meaning that you can write code that looks a lot like a mathematical expression without having to do explicit looping. We did this in the example above with ‘b1+b2’, which created a new vector by adding b1 and b2 element-by-element.</p>
<p>If you want to access a particular element in a vector you use square brackets to specify which indices you are interested in. (<em>Note: R indices begin at 1, not 0 like C/Java/Python.</em>) Another way to pick elements out of a vector is with a <em>mask</em> – a logical vector of the same length as the original vector.</p>
<p>Example 2:cla</p>
<pre><code># Look at the first 5 and last three elements of the built-in 'letters' character vector
letters[1:5]
letters[24:26]

# Create a logical vector that is TRUE for all even indices
evenMask &lt;- (1:26 %% 2) == 0
evenMask
letters[evenMask]

# Use the `%in%` operator (see ?match) to create a logical vector identifying elements 
# from one vector that match elements from another vector
vowelMask &lt;- letters %in% c('a','e','i','o','u','y')
vowelMask
letters[vowelMask]

# The `which()` function identifies indices where the logical vector is TRUE
which(vowelMask)

# 'letters[vowelMask]' returns a vector of six elements.
# We can use the '[ ]' syntax again to extract the first 5 elements of the return vector
letters[vowelMask][1:5]</code></pre>
<hr />
<p><strong>Task 3</strong>: Explain the following lines and the plot:</p>
<pre><code>everyone &lt;- rnorm(1e6)
percentiles &lt;- quantile(everyone, probs=seq(0,1,.01))
moocherMask &lt;- (everyone &lt;= percentiles[47]) # vectorized comparison
moochers &lt;- everyone[moocherMask]
hist(everyone, n=100, main=&quot;Moochers?&quot;, col.main='red')
hist(moochers, n=47, col='red', add=TRUE)</code></pre>
<hr />
</div>
<div id="data-structures" class="section level1">
<h1>Data Structures</h1>
<div id="vector" class="section level2">
<h2>vector</h2>
<p>We have already discussed the fundamental data structure in R – <em>vector</em>. Anything numeric is a vector even if it only has a single value, even if you are tempted to think it is a constant. For example,</p>
<p>pi</p>
<pre><code>length(pi)
pi[1:10]</code></pre>
<p>Here, R is reporting that the numeric vector named <em>pi</em> is of length of one with <span class="math inline">\(\pi\)</span> as the first element (see <code>?print</code> to modify rounding). But we can still reference elements 2:10 and find out that they hold <code>NA</code> (missing value).</p>
</div>
<div id="matrix" class="section level2">
<h2>matrix</h2>
<p>A <em>matrix</em> is a 2-dimensional data structure where all elements are of the same type – numeric, character, logical, etc. Matrices are created with the <code>matrix()</code> function and elements can be referenced with <em>[row,column]</em> index notation. You can select an entire row or column by leaving the other index blank. (Higher dimensional arrays are created with <code>array()</code>.)</p>
<p>matrix</p>
<pre><code>m &lt;- matrix(c(11,12,13,21,22,23), nrow=2, byrow=TRUE)
dim(m) # dimensions 
m[2,2:3] # row 2, columns 2 &amp; 3
m[c(1,2),c(1,3)] # rows 1 &amp; 2, columns 1 &amp; 3</code></pre>
</div>
<div id="list" class="section level2">
<h2>list</h2>
<p>A <em>list</em> is the R version of an <em>associative array</em> in C or a <em>dictionary</em> in Python with <em>keys</em> and <em>values</em>. Each element of a list contains some other object that may be of any type. So you can have one list element that contains a vector while another contains a matrix or a <em>dataframe</em> (see below).</p>
<p>List elements are referenced with double bracket notation <em>[[x]]</em> where <em>x</em> can be either an integer index or a character string <em>key</em>.</p>
<p>list</p>
<pre><code>myList &lt;- list('digits'=0:9,
               'xyz'=letters[24:26],
               'matrix'=m)

names(myList)
myList[[2]]
myList[['matrix']]
myList[['matrix']][,3] # column 3 of the 'matrix' element</code></pre>
</div>
<div id="dataframe" class="section level2">
<h2>dataframe</h2>
<p>Last, but definitely not least, R has a <em>dataframe</em> type which is a cross between <em>list</em> and a <em>matrix</em>. Whereas matrices require that all columns be of the same basic type, dataframes are like spreadsheets in that each column can have a different type. Dataframe rows are understood as individual <em>records</em>.</p>
<p>Dataframe elements can be referenced with either matrix or list syntax. Individual columns (variables) can also be referenced with <em>df$var</em> syntax as seen below.</p>
<p>R comes with lots of built-in datasets. (Use <code>data()</code> to see them all.) Many of these are dataframes. We will explore the <em>iris</em> dataset to learn more about dataframes.</p>
<p>First, let’s learn about this dataset</p>
<pre><code>class(iris)
dim(iris)
summary(iris)</code></pre>
<p>The first four columns are numeric variables. The ‘Species’ column is a <em>factor</em> (see ?factor)</p>
<p>Two calls to hist() showing two ways to access dataframe columns</p>
<pre><code>hist(iris$Sepal.Width, breaks=seq(0,10,.2), xlab='', main='', las=1) # (see ?par to learn about 'las')
hist(iris[['Sepal.Length']], breaks=seq(0,10,.2), border='red', add=TRUE)
legend('topright',
       legend=c('Sepal Width','Sepal Length'),
       col=c('black','red'),
       pch=0)
title('Botanical Statistics')</code></pre>
<hr />
<p>That ends the whirwind introduction to R. You have been exposed to a lot of new material that bears further exploration. If you ever get confused with R there are two great strategies. If you are confused with an object, check it’s class with the <code>class()</code> function. If you are having issues with a function, try typing <code>?function</code> (where <code>function</code> is the name of your function e.g. <code>?mean</code>).</p>
<hr />
<p>next &gt; <a href="Lesson_02_DataframesAndSimplePlots.html">PWFSLSmoke’s Data Model</a></p>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
