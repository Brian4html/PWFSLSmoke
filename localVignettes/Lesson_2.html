<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Mazama Science" />

<meta name="date" content="2016-11-04" />

<title>ws_monitor Data Model</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">ws_monitor Data Model</h1>
<h4 class="author"><em>Mazama Science</em></h4>
<h4 class="date"><em>2016-11-04</em></h4>



<p>The <strong>PWFSLSmoke</strong> package is designed to provide a compact, full-featured suite of utilities for working with PM 2.5 data used to monitor wildfire smoke. Uniform data models provides consistent data access across monitoring data available from different agencies.</p>
<p>The core data model in this package is the <code>ws_monitor</code> object used to store data associated with groups of individual monitors.</p>
<p>To work efficiently with the package it is important to understand the structure of this data object and which functions operate on it. Package functions that begin with <code>monitor_</code>, expect objects of class <code>ws_monitor</code> as their first argument. (<em>Note that ‘ws_’ stands for ‘wildfire smoke’.</em>)</p>
<div id="monitoring-data" class="section level2">
<h2>Monitoring Data</h2>
<p>Monitoring data will typically be obtained from an agency charged with archiving data acquired at monitoring sites. For wildifre smoke, the primary pollutant is PM 2.5 and the sites archiving this data include <a href="http://www.airnow.gov">AirNow</a>, <a href="http://www.wrcc.dri.edu">WRCC</a> and <a href="http://app.airsis.com/USFS/">AIRSIS</a>. For this tutorial we will be getting out data from WRCC.</p>
<p>We can begin by creating a <code>ws_monitor</code> and looking at how it’s made. Once we get a general look at a <code>ws_monitor</code> object we will start do some examples to get more in depth knowledge of them. Try out the following code to get started:</p>
<pre><code>library(PWFSLSmoke)

monitor_data &lt;- wrcc_load('20150801', '20150810')</code></pre>
<p>This is going to load wrcc monitor data from August 1-10 from 2015. We can look at what <code>monitor_data</code> is by exploring it’s class:</p>
<pre><code>class(monitor_data)
&gt; [1] &quot;ws_monitor&quot; &quot;list&quot;

class(monitor_data$data)
&gt; [1] &quot;data.frame&quot;

class(monitor_data$meta)
[1] &quot;data.frame&quot;</code></pre>
<p>We can see that <code>monitor_data</code> is a list containing two dataframes: <code>data</code> and <code>meta</code>.</p>
<p>The <code>data</code> dataframe contains all hourly measurements organized with rows (the ‘unlimited’ dimension) as unique timestamps and columns as unique monitors. The very first column is always named <code>datetime</code> and contains the <code>POSIXct</code> datetime in Universal Time Coordinates (UTC = GMT).</p>
<p>The <code>meta</code> dataframe contains all metadata associated with monitoring sites and is organized with rows as unique sites and columns as site attributes. The following columns are guaranteed to exist in the <code>meta</code> dataframe:</p>
<ul>
<li><code>monitorID</code> – unique ID for each monitoring site (<em>i.e.</em> each instrument deployment)</li>
<li><code>longitude</code> – decimal degrees East</li>
<li><code>latitude</code> – decimal degrees North</li>
<li><code>elevation</code> – meters above sea level</li>
<li><code>timezone</code> – Olson timezone</li>
<li><code>countryCode</code> – ISO 3166-1 alpha-2 code</li>
<li><code>stateCode</code> – ISO 3166-2 alpha-2 code</li>
</ul>
<p><em>(The <a href="https://github.com/MazamaScience/MazamaSpatialUtils">MazamaSpatialUtils</a> package is used to assign timezones and state and country codes.)</em></p>
<p>Let’s look and see what columns out <code>monitor_data</code> has:</p>
<pre><code>names(monitor_data$meta)
&gt; [1] &quot;AQSID&quot;          &quot;siteCode&quot;       &quot;siteName&quot;       &quot;status&quot;        
&gt; [5] &quot;agencyID&quot;       &quot;agencyName&quot;     &quot;EPARegion&quot;      &quot;latitude&quot;      
&gt; [9] &quot;longitude&quot;      &quot;elevation&quot;      &quot;timezone&quot;       &quot;GMTOffsetHours&quot;
&gt;[13] &quot;countryCode&quot;    &quot;FIPSMSACode&quot;    &quot;MSAName&quot;        &quot;FIPSStateCode&quot; 
&gt;[17] &quot;stateCode&quot;      &quot;GNISCountyCode&quot; &quot;countyName&quot;     &quot;monitorID&quot;  </code></pre>
<p>As we can see, we have all the guaranteed columns and then some!</p>
<p>It is important to note that the <code>monitorID</code> acts as a unique key that connects data with metadata. The <code>monitorID</code> is used for column names in the <code>data</code> dataframe and for row names in the <code>meta</code> dataframe. So the following will always be true for any <code>ws_monitor</code>:</p>
<pre><code>rownames(ws_monitor$meta) = ws_monitor$meta$monitorID
colnames(ws_monitor$data) = c('datetime',ws_monitor$meta$monitorID)</code></pre>
<p><strong>Example 1: Exploring <code>ws_monitor</code> Objects</strong></p>
<p>We will now create and manipulate a new <code>ws_monitor</code> object with data from airnow:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(PWFSLSmoke)</code></pre></div>
<pre><code>## Loading required package: dplyr</code></pre>
<pre><code>## 
## Attaching package: 'dplyr'</code></pre>
<pre><code>## The following objects are masked from 'package:stats':
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from 'package:base':
## 
##     intersect, setdiff, setequal, union</code></pre>
<pre><code>## Loading required package: maps</code></pre>
<pre><code>## Loading required package: MazamaSpatialUtils</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Set the location of the local data archive</span>
<span class="kw">setSmokeDataDir</span>(<span class="st">'~/Data/Smoke'</span>)

<span class="co"># Get some airnow data for Washington</span>
airnow &lt;-<span class="st"> </span><span class="kw">airnow_load</span>(<span class="dt">startdate=</span><span class="dv">20150801</span>, <span class="dt">enddate=</span><span class="dv">20150831</span>)
WA &lt;-<span class="st"> </span><span class="kw">monitor_subset</span>(airnow, <span class="dt">stateCodes=</span><span class="st">'WA'</span>)

<span class="co"># 'ws_monitor' objects can be identified by their class</span>
<span class="kw">class</span>(WA)</code></pre></div>
<pre><code>## [1] &quot;ws_monitor&quot; &quot;list&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Examine the 'meta' dataframe</span>
<span class="kw">dim</span>(WA$meta)</code></pre></div>
<pre><code>## [1] 55 24</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rownames</span>(WA$meta)</code></pre></div>
<pre><code>##  [1] &quot;530330017&quot; &quot;530330080&quot; &quot;530050002&quot; &quot;530330024&quot; &quot;530330057&quot;
##  [6] &quot;530332004&quot; &quot;530530029&quot; &quot;530530031&quot; &quot;530610005&quot; &quot;530611007&quot;
## [11] &quot;530630047&quot; &quot;530670013&quot; &quot;530531018&quot; &quot;530272002&quot; &quot;530310003&quot;
## [16] &quot;530730015&quot; &quot;530251002&quot; &quot;530650004&quot; &quot;530010003&quot; &quot;530750006&quot;
## [21] &quot;530750003&quot; &quot;530331011&quot; &quot;530210002&quot; &quot;530330037&quot; &quot;530710005&quot;
## [26] &quot;530750005&quot; &quot;530150015&quot; &quot;530470009&quot; &quot;530370002&quot; &quot;530090013&quot;
## [31] &quot;530610020&quot; &quot;530070010&quot; &quot;530770015&quot; &quot;530650002&quot; &quot;530470010&quot;
## [36] &quot;530770009&quot; &quot;530570015&quot; &quot;530130002&quot; &quot;530030004&quot; &quot;530110022&quot;
## [41] &quot;530579999&quot; &quot;530639997&quot; &quot;530299999&quot; &quot;530639996&quot; &quot;530410004&quot;
## [46] &quot;530770016&quot; &quot;530090015&quot; &quot;530450007&quot; &quot;530470013&quot; &quot;530570011&quot;
## [51] &quot;530350007&quot; &quot;530070011&quot; &quot;530330030&quot; &quot;530110024&quot; &quot;530090017&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">colnames</span>(WA$meta)</code></pre></div>
<pre><code>##  [1] &quot;AQSID&quot;          &quot;siteCode&quot;       &quot;siteName&quot;       &quot;status&quot;        
##  [5] &quot;agencyID&quot;       &quot;agencyName&quot;     &quot;EPARegion&quot;      &quot;latitude&quot;      
##  [9] &quot;longitude&quot;      &quot;elevation&quot;      &quot;GMTOffsetHours&quot; &quot;countryCode&quot;   
## [13] &quot;FIPSCMSACode&quot;   &quot;CMSAName&quot;       &quot;FIPSMSACode&quot;    &quot;MSAName&quot;       
## [17] &quot;FIPSStateCode&quot;  &quot;stateCode&quot;      &quot;GNISCountyCode&quot; &quot;countyName&quot;    
## [21] &quot;GNISCityCode&quot;   &quot;cityName&quot;       &quot;timezone&quot;       &quot;monitorID&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Examine the 'data' dataframe</span>
<span class="kw">dim</span>(WA$data)</code></pre></div>
<pre><code>## [1] 714  56</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">colnames</span>(WA$data)</code></pre></div>
<pre><code>##  [1] &quot;datetime&quot;  &quot;530330017&quot; &quot;530330080&quot; &quot;530050002&quot; &quot;530330024&quot;
##  [6] &quot;530330057&quot; &quot;530332004&quot; &quot;530530029&quot; &quot;530530031&quot; &quot;530610005&quot;
## [11] &quot;530611007&quot; &quot;530630047&quot; &quot;530670013&quot; &quot;530531018&quot; &quot;530272002&quot;
## [16] &quot;530310003&quot; &quot;530730015&quot; &quot;530251002&quot; &quot;530650004&quot; &quot;530010003&quot;
## [21] &quot;530750006&quot; &quot;530750003&quot; &quot;530331011&quot; &quot;530210002&quot; &quot;530330037&quot;
## [26] &quot;530710005&quot; &quot;530750005&quot; &quot;530150015&quot; &quot;530470009&quot; &quot;530370002&quot;
## [31] &quot;530090013&quot; &quot;530610020&quot; &quot;530070010&quot; &quot;530770015&quot; &quot;530650002&quot;
## [36] &quot;530470010&quot; &quot;530770009&quot; &quot;530570015&quot; &quot;530130002&quot; &quot;530030004&quot;
## [41] &quot;530110022&quot; &quot;530579999&quot; &quot;530639997&quot; &quot;530299999&quot; &quot;530639996&quot;
## [46] &quot;530410004&quot; &quot;530770016&quot; &quot;530090015&quot; &quot;530450007&quot; &quot;530470013&quot;
## [51] &quot;530570011&quot; &quot;530350007&quot; &quot;530070011&quot; &quot;530330030&quot; &quot;530110024&quot;
## [56] &quot;530090017&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># This should always be true</span>
<span class="kw">all</span>(<span class="kw">rownames</span>(WA$meta) ==<span class="st"> </span><span class="kw">colnames</span>(WA$data[,-<span class="dv">1</span>]))</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p><strong>Example 2: Manipulating <code>ws_monitor</code> Objects</strong></p>
<p>The <strong>PWFSLSmoke</strong> package has numerous functions that can work with <code>ws_monitor</code> objects, all of which begin with <code>monitor_</code>. If you need to do something that the package functions do not provide you can manipulate <code>ws_monitor</code> objects directly as long as you retain the structure of the data model.</p>
<p>The following code mixes use of package functions with direct manipulation of the <code>ws_monitor</code> object.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Use special knowledge of AirNow IDs to subset airnow data for Spokane county monitors</span>
SpokaneCountyIDs &lt;-<span class="st"> </span>airnow$meta$monitorID[stringr::<span class="kw">str_detect</span>(airnow$meta$monitorID, <span class="st">&quot;^53063&quot;</span>)]
Spokane &lt;-<span class="st"> </span><span class="kw">monitor_subset</span>(airnow, <span class="dt">monitorIDs=</span>SpokaneCountyIDs)

<span class="co"># Apply 3-hr rolling mean</span>
Spokane_3hr &lt;-<span class="st"> </span><span class="kw">monitor_rollingMean</span>(Spokane, <span class="dv">3</span>, <span class="dt">align=</span><span class="st">&quot;center&quot;</span>)

<span class="co"># Replace data columns with their squared values (exponentiation is not supplied by the package)</span>
Spokane_3hr$data[,-<span class="dv">1</span>] &lt;-<span class="st"> </span>(Spokane_3hr$data[,-<span class="dv">1</span>])^<span class="dv">2</span>

<span class="co"># NOTE:  Exponentiation is only used as an example. It does not generate a meaningful result.</span>

<span class="co"># Create a daily averaged 'ws_monitor' object</span>
Spokane_daily_3hr &lt;-<span class="st"> </span><span class="kw">monitor_dailyStatistic</span>(Spokane_3hr)</code></pre></div>
<pre><code>## Warning: '::' is deprecated; use 'OlsonNames' instead. Deprecated in
## version '1.5.8'.'lubridate' is deprecated; use 'OlsonNames' instead.
## Deprecated in version '1.5.8'.'olson_time_zones' is deprecated; use
## 'OlsonNames' instead. Deprecated in version '1.5.8'.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Check out the correlation between monitors (correlation is not supplied by the package)</span>
data &lt;-<span class="st"> </span>Spokane_daily_3hr$data[,-<span class="dv">1</span>] <span class="co"># omit the 'datetime' column</span>
<span class="kw">cor</span>(data, <span class="dt">use=</span><span class="st">'complete.obs'</span>)</code></pre></div>
<pre><code>##           530630047 530639997 530639996
## 530630047 1.0000000 0.9718369 0.8362225
## 530639997 0.9718369 1.0000000 0.8784183
## 530639996 0.8362225 0.8784183 1.0000000</code></pre>
<hr />
<p>This introduction to the <code>ws_monitor</code> data model should be enough to get you started. There are additional tutorials that will go more in depth of how to obtain, manipulate and visualilze <code>ws_monitor</code> that can be used to learn more about the PWFSLSmoke package as well as also serve as a reference.</p>
<hr />
<p>next &gt; <a href="Obtaining%20Data">Obtaining Data</a></p>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
